services:
  - type: web
    name: mcp-endpoints
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python mcp_endpoints.py
    envVars:
      - key: MCP_HOST
        value: 0.0.0.0
      - key: MCP_PORT
        value: $PORT

  - type: web
    name: cicd-dashboard
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: streamlit run dashboard/dashboard.py --server.port=$PORT --server.address=0.0.0.0
    envVars:
      - key: PYTHONPATH
        value: /opt/render/project/src

  - type: worker
    name: cicd-agents
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python main.py --dataset dataset/student_scores.csv --planner rl